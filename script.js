let regulations = {
    "2018": {
        "CSE": {
            "Semester 1": [
                { subject: "English", credit: 3 },
                { subject: "Calculus and Linear Algebra", credit: 4 },
                { subject: "Physics: Semiconductor Physics", credit: 5 },
                { subject: "Engineering Graphics and Design", credit: 3 },
                { subject: "Basic Electrical and Electronics Engineering", credit: 5 },
            ],
            "Semester 2": [
                { subject: "Chinese / French / German / Japanese/ Korean", credit: 3 },
                { subject: "Advanced Calculus and Complex Analysis", credit: 4 },
                { subject: "Chemistry", credit: 5 },
                { subject: "Programming for Problem Solving", credit: 5 },
                { subject: "Civil and Mechanical Engineering Workshop", credit: 3 },
                { subject: "General Aptitude", credit: 1 },
            ],
            "Semester 3": [
                { subject: "Transforms and Boundary Value Problems", credit: 4 },
                { subject: "Biology", credit: 2 },
                { subject: "Analog and Digital Electronics", credit: 4 },
                { subject: "Data Structures and Algorithms", credit: 4 },
                { subject: "Object Oriented Design and Programming", credit: 4 },
                { subject: "Computer Organization and Architecture", credit: 4 },
                { subject: "Management Principles for Engineers", credit: 2 },
            ],
            "Semester 4": [
                { subject: "Probability and Queueing Theory", credit: 4 },
                { subject: "Computer Communications", credit: 3 },
                { subject: "Design and Analysis of Algorithms", credit: 4 },
                { subject: "Operating Systems", credit: 4 },
                { subject: "Software Engineering and Project Management", credit: 4 },
                { subject: "Advanced Programming Practice", credit: 4 },
                { subject: "Competitive Professional Skills-I", credit: 1 },
                { subject: "Social Engineering", credit: 2 },
            ],
            "Semester 5": [
                { subject: "Discrete Mathematics for Engineers", credit: 4 },
                { subject: "Formal Language and Automata", credit: 3 },
                { subject: "Computer Networks", credit: 4 },
                { subject: "Competitive Professional Skills-II", credit: 1 },
                { subject: "Professional Elective - 1", credit: 3 },
                { subject: "Professional Elective - 2", credit: 3 },
                { subject: "Open Elective - 1", credit: 3 },
                { subject: "Massive Open Online Course - I/ Industrial Training-I/ Seminar - 1", credit: 1 },
            ],
            "Semester 6": [
                { subject: "Database Management Systems", credit: 4 },
                { subject: "Compiler Design", credit: 4 },
                { subject: "Artificial Intelligence", credit: 4 },
                { subject: "Comprehension", credit: 1 },
                { subject: "Competitive Professional Skills-III", credit: 1 },
                { subject: "Professional Elective - 3", credit: 3 },
                { subject: "Professional Elective - 4", credit: 3 },
                { subject: "Open Elective - 2", credit: 3 },
                { subject: "Massive Open Online Course - II/ Industrial Training-II/ Seminar - II", credit: 1 },
                { subject: "Employability Skills and Practices", credit: 1 },
            ],
            "Semester 7": [
                { subject: "Professional Elective - 5", credit: 3 },
                { subject: "Professional Elective - 6", credit: 3 },
                { subject: "Open Elective - 3", credit: 3 },
                { subject: "Minor Project/ Internship (4-6 weeks)", credit: 3 },
            ],
            "Semester 8": [
                { subject: "Project/ Semester Internship", credit: 10 },
            ],
        },
        "AI-ML": {
            "Semester 1": [
                { subject: "English", credit: 3 },
                { subject: "Calculus and Linear Algebra", credit: 4 },
                { subject: "Physics: Semiconductor Physics", credit: 5 },
                { subject: "Engineering Graphics and Design", credit: 3 },
                { subject: "Basic Electrical and Electronics Engineering", credit: 5 },
            ],
            "Semester 2": [
                { subject: "Chinese / French / German / Japanese/ Korean", credit: 3 },
                { subject: "Advanced Calculus and Complex Analysis", credit: 4 },
                { subject: "Chemistry", credit: 5 },
                { subject: "Programming for Problem Solving", credit: 5 },
                { subject: "Civil and Mechanical Engineering Workshop", credit: 3 },
                { subject: "General Aptitude", credit: 1 },
            ],
            "Semester 3": [
                { subject: "Transforms and Boundary Value Problems", credit: 4 },
                { subject: "Biology", credit: 2 },
                { subject: "Analog and Digital Electronics", credit: 4 },
                { subject: "Data Structures and Algorithms", credit: 4 },
                { subject: "Object Oriented Design and Programming", credit: 4 },
                { subject: "Computer Organization and Architecture", credit: 4 },
                { subject: "Management Principles for Engineers", credit: 2 },
            ],
            "Semester 4": [
                { subject: "Probability and Queueing Theory", credit: 4 },
                { subject: "Computer Communications", credit: 3 },
                { subject: "Design and Analysis of Algorithms", credit: 4 },
                { subject: "Operating Systems", credit: 4 },
                { subject: "Software Engineering and Project Management", credit: 4 },
                { subject: "Advanced Programming Practice", credit: 4 },
                { subject: "Competitive Professional Skills-I", credit: 1 },
                { subject: "Social Engineering", credit: 2 },
            ],
            "Semester 5": [
                { subject: "Discrete Mathematics for Engineers", credit: 4 },
                { subject: "Formal Language and Automata", credit: 3 },
                { subject: "Computer Networks", credit: 4 },
                { subject: "Competitive Professional Skills-II", credit: 1 },
                { subject: "Professional Elective - 1", credit: 3 },
                { subject: "Professional Elective - 2", credit: 3 },
                { subject: "Open Elective - 1", credit: 3 },
                { subject: "Massive Open Online Course - I/ Industrial Training-I/ Seminar - 1", credit: 1 },
            ],
            "Semester 6": [
                { subject: "Database Management Systems", credit: 4 },
                { subject: "Compiler Design", credit: 4 },
                { subject: "Artificial Intelligence", credit: 4 },
                { subject: "Comprehension", credit: 1 },
                { subject: "Competitive Professional Skills-III", credit: 1 },
                { subject: "Professional Elective - 3", credit: 3 },
                { subject: "Professional Elective - 4", credit: 3 },
                { subject: "Open Elective - 2", credit: 3 },
                { subject: "Massive Open Online Course - II/ Industrial Training-II/ Seminar - II", credit: 1 },
                { subject: "Employability Skills and Practices", credit: 1 },
            ],
            "Semester 7": [
                { subject: "Professional Elective - 5", credit: 3 },
                { subject: "Professional Elective - 6", credit: 3 },
                { subject: "Open Elective - 3", credit: 3 },
                { subject: "Minor Project/ Internship (4-6 weeks)", credit: 3 },
            ],
            "Semester 8": [
                { subject: "Project/ Semester Internship", credit: 10 },
            ],
        },
        "ECE": {
            "Semester 1": [
                { subject: "Foreign Language (Chinese/ French/ German/ Japanese / Korean)", credit: 3 },
                { subject: "Calculus and Linear Algebra", credit: 4 },
                { subject: "Chemistry", credit: 5 },
                { subject: "Programming for Problem Solving", credit: 5 },
                { subject: "Civil and Mechanical Engineering Workshop", credit: 3 },
            ],
            "Semester 2": [
                { subject: "English", credit: 3 },
                { subject: "Advanced Calculus and Complex Analysis", credit: 4 },
                { subject: "Physics: Electromagnetic Theory, Quantum Mechanics", credit: 5 },
                { subject: "Engineering Graphics and Design", credit: 3 },
                { subject: "Basic Electrical and Electronics Engineering", credit: 5 },
                { subject: "General Aptitude", credit: 1 },
            ],
            "Semester 3": [
                { subject: "Transforms and Boundary Value Problems", credit: 4 },
                { subject: "Control Systems", credit: 3 },
                { subject: "Electronic Devices", credit: 4 },
                { subject: "Digital Electronic Principles", credit: 4 },
                { subject: "Signals and Systems", credit: 4 },
                { subject: "Electromagnetics and Transmission Lines", credit: 3 },
                { subject: "Social Engineering", credit: 2 },
            ],
            "Semester 4": [
                { subject: "Probability and Stochastic Process", credit: 4 },
                { subject: "Biology", credit: 2 },
                { subject: "Analog Electronic Circuits", credit: 4 },
                { subject: "Linear Integrated Circuits", credit: 4 },
                { subject: "Professional Elective-1", credit: 3 },
                { subject: "Open Elective-1", credit: 3 },
                { subject: "Management Principles for Engineers", credit: 2 },
            ],
            "Semester 5": [
                { subject: "Discrete Mathematics for Engineers", credit: 4 },
                { subject: "Microprocessor, Microcontroller and Interfacing Techniques", credit: 4 },
                { subject: "Digital Signal Processing", credit: 4 },
                { subject: "Analog and Digital Communication", credit: 4 },
                { subject: "Professional Elective-2", credit: 3 },
                { subject: "Open Elective-2", credit: 3 },
                { subject: "Massive Open Online Course-I / Industrial Training-I / Seminar-I", credit: 1 },
            ],
            "Semester 6": [
                { subject: "VLSI Design", credit: 4 },
                { subject: "Microwave and Optical Communications", credit: 4 },
                { subject: "Computer Communication Networks", credit: 4 },
                { subject: "Comprehension", credit: 1 },
                { subject: "Professional Elective-3", credit: 3 },
                { subject: "Professional Elective-4", credit: 3 },
                { subject: "Open Elective-3", credit: 3 },
                { subject: "Massive Open Online Course-II / Industrial Training-II / Seminar-II", credit: 1 },
                { subject: "Employability Skills and Practices", credit: 1 },
            ],
            "Semester 7": [
                { subject: "Wireless Communications", credit: 4 },
                { subject: "Professional Elective-5", credit: 3 },
                { subject: "Professional Elective-6", credit: 3 },
                { subject: "Open Elective-4", credit: 3 },
                { subject: "Minor Project / Internship (4-6 weeks)", credit: 3 },
            ],
            "Semester 8": [
                { subject: "Project / Semester Internship", credit: 10 },
            ],
        },
    },
};


const grades = {
    "O": 10,
    "A+": 9,
    "A": 8,
    "B+": 7,
    "B": 6,
    "C": 5,
    "F": 0
};

function updateCourses() {
    let regulation = document.getElementById("regulation").value;
    let courseDropdown = document.getElementById("course");

    // Clear previous options
    courseDropdown.innerHTML = "";

    for (let course in regulations[regulation]) {
        let option = document.createElement("option");
        option.value = course;
        option.textContent = course;
        courseDropdown.appendChild(option);
    }

    // Update semesters for the first course by default
    updateSemesters();
}

function updateSemesters() {
    let regulation = document.getElementById("regulation").value;
    let course = document.getElementById("course").value;
    let semesterDropdown = document.getElementById("semester");

    // Clear previous options
    semesterDropdown.innerHTML = "";

    for (let semester in regulations[regulation][course]) {
        let option = document.createElement("option");
        option.value = semester;
        option.textContent = semester;
        semesterDropdown.appendChild(option);
    }
}
function goToSubjectsPage() {
    let regulation = document.getElementById("regulation").value;
    let course = document.getElementById("course").value;
    let semester = document.getElementById("semester").value;

    localStorage.setItem("selectedRegulation", regulation);
    localStorage.setItem("selectedCourse", course);
    localStorage.setItem("selectedSemester", semester);

    window.location.href = "subjects.html";
}

function populateSubjects() {
    let regulation = localStorage.getItem("selectedRegulation");
    let course = localStorage.getItem("selectedCourse");
    let semester = localStorage.getItem("selectedSemester");

    let subjects = regulations[regulation][course][semester];
    let container = document.getElementById("subjectsContainer");

    subjects.forEach(subjectObj => {
        let label = document.createElement("label");
        label.textContent = subjectObj.subject;

        let select = document.createElement("select");
        for (let grade in grades) {
            let option = document.createElement("option");
            option.value = grade;
            option.textContent = grade;
            select.appendChild(option);
        }

        container.appendChild(label);
        container.appendChild(select);
    });
}

function calculateGPA() {
    let selects = document.getElementById("subjectsContainer").querySelectorAll("select");
    let totalGradePoints = 0;
    let totalCredits = 0;
    
    selects.forEach((select, index) => {
        let regulation = localStorage.getItem("selectedRegulation");
        let course = localStorage.getItem("selectedCourse");
        let semester = localStorage.getItem("selectedSemester");

        let credit = regulations[regulation][course][semester][index].credit;
        totalCredits += credit;

        totalGradePoints += grades[select.value] * credit;
    });
    
    let gpa = totalGradePoints / totalCredits;
    document.getElementById("result").innerText = `Your GPA is: ${gpa.toFixed(3)}`;
}

// If on subjects.html, populate subjects
if (window.location.pathname.includes("subjects.html")) {
    populateSubjects();
}